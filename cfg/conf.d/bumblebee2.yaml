%YAML 1.2
%TAG ! tag:fawkesrobotics.org,cfg/
---
doc-url: !url http://trac.fawkesrobotics.org/wiki/Plugins/bumblebee2
---
bumblebee2:
  # Can be either triclops or opencv
  # Note that current triclops versions crash on modern Linux systems
  # due to an incompatible Boost version
  stereo-matcher: opencv

  # Coordinate frame ID of the basis of the BB2, i.e. the center point
  # at the lower camera bound (the screw hole)
  base-frame: /bumblebee2/base

  # Prefix to prepend to coordinate frame IDs the two cameras. The plugin will
  # append left and right respectively and publish them
  # at the lower camera bound (the screw hole)
  frames-prefix: /bumblebee2/

  # Interval in seconds in which to publish the transforms
  frames-interval: 1.0

  # OpenCV stereo correspondence by block matching parameters
  opencv-stereo:
    # *** pre-filtering (normalization of input images)
    # Filter type, can be xsobel or normalized_response
    pre-filter-type: normalized_response

    # averaging window size: 5x5..21x21
    pre-filter-size: 15

    # the output of pre-filtering is clipped by [- pre-filter-cap,pre-filter-cap]
    pre-filter-cap: 15

    # *** correspondence using Sum of Absolute Difference (SAD)
    # 5x5..21x21
    sad-window-size: 15

    # minimum disparity (can be negative)
    min-disparity: 32

    # maximum disparity - minimum disparity (> 0)
    num-disparities: 128

    # *** post-filtering
    # the disparity is only computed for pixels
    # with textured enough neighborhood
    texture-threshold: 20

    # accept the computed disparity d* only if
    # SAD(d) >= SAD(d*)*(1 + uniquenessRatio/100.)
    # for any d != d*+/-1 within the search range.
    uniqueness-ratio: 30

    # disparity variation window
    speckle-window-size: 32
    
    # acceptable range of variation in window
    speckle-range: 32

    # if enabled, the results may be more accurate,
    # at the expense of slower processing
    try-smaller-windows: false
