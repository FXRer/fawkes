
;---------------------------------------------------------------------------
;  agent-init.inc - OpenPRS agent initialization file
;
;  Created: Mon Aug 25 13:20:02 2014
;  Copyright  2014  Tim Niemueller [www.niemueller.de]
;  Licensed under GPLv2+ license, cf. LICENSE file
;---------------------------------------------------------------------------

(
(defop agent-init
  :invocation (agent-init)
  :context ()
  :setting (& (setting "idle-looptime-sec" $ilt_sec) (setting "idle-looptime-usec" $ilt_usec)
  :body (
    (! (bb-open "SkillerInterface" "Skiller" BB-READ))
    (! (time-set-idle-looptime $ilt_sec $ilt_usec))
    (! (say "Agent loaded and ready to run")))
  :effects ((~> (agent-init)))
)

(defop say
  :invocation (! (say $text))
  :call (say $text)
  :context ()
  :action (skill-call "say" "text" $text "wait" true)
  :documentation "Invoke skiller to synthesize given text as speech."
)

(defop agent-print-skiller-iface
  :invocation (bb-data "type" "SkillerInterface" "id" "Skiller" "time" $t_sec $t_usec $data)
  :context (blackboard-interface "SkillerInterface" "Skiller" BB-READ)
  :body ((! (bb-print "SkillerInterface" "Skiller")))
)

)
