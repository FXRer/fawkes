<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE interface SYSTEM "interface.dtd">
<!-- $Id$ -->
<interface name="MotorInterface" author="Martin Liebenberg, Tim Niemueller" year="2007">
  <constants>
    <constant type="unsigned int" name="MOTOR_ENABLED" value="0">
      Motor is enabled and sending drive commands will make the robot move.
    </constant>
    <constant type="unsigned int" name="MOTOR_DISABLED" value="1">
      Motor is disabled. Sending of drive commands is accepted but the robot will NOT
      move.
    </constant>
  </constants>
  <data>
    <comment>This are the actual RPMs of the motors taken from the VMC.</comment>
    <field type="unsigned int" name="MotorState" bits="1">
      The current state of the motor.
    </field>
    <field type="int" name="RightRPM">
      RPM of the motor on the right front of the robot.
    </field>
    <field type="int" name="BackRPM">
      RPM of motor on the back of the robot.
    </field>
    <field type="int" name="LeftRPM">
      RPM of the motor on the left front of the robot.
    </field>
    <field type="unsigned long int" name="ControllerThreadID">
     The ID of the controlling thread.
     Only from this thread command messages are accepted.
    </field>
    <field type="char" length="64" name="ControllerThreadName">
     The name of the controlling thread.
  </field>
  </data>
  <message name="SetMotorState">
    <comment>Sets the current motor state.</comment>
    <field type="unsigned int" name="MotorState">
      The new motor state to set. Use the MOTOR_* constants.
    </field>
  </message>
  <message name="AquireControl">
    <comment>This allows any thread to aquire the control over the motor thread.
      Use with extreme care!</comment>
    <field type="unsigned long int" name="ThreadID">
      The thread ID of the thread which is allowed to control the motors.
      Set to zero to use the data of the current thread (the message is zeroed at
      creation automatically, so if you do not set anything the sending thread
      aquires the control.
    </field>
    <field type="char" length="64" name="ThreadName">
      The thread name of the aquiring thread.
    </field>
  </message>
  <message name="TransRotRPM">
    <comment>Determines the drive commands by translation and rotation.</comment>
    <field type="float" name="Forward">The forward command.</field>
    <field type="float" name="Sideward">The sideward command.</field>
    <field type="float" name="Rotation">The rotation command.</field>
    <field type="float" name="Speed">The speed command.</field>
  </message>
</interface>
